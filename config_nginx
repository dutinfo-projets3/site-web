# Configuration NGINX
#####################
# Pour que vous puissiez coder il faut que vous utilisiez un serveur Nginx en local et non Apache (Sinon je vous laisse vous débrouiller)
# Changez d'abord le chemin root à la ligne de ce fichier, mettez y la ligne du dossier Web contenu dans le dossier de GIT que vous avez cloné.
# Une fois fait, vous allez aussi changer le dossier de log de Nginx aux lignes et .
# Pensez ensuite à donner les permissions sur les dossiers parents et tout comme il faut. Le dossier web peut avoir RX mais les autres dossier du git doivent être en
# RWX car symfony gère le cache et les logs aussi, il doit donc pouvoir écrire dans ces dossiers.
#
# Une fois fait, nginx relancé, vous devriez y avoir accès via l'URL localhost.
# Vous pouvez ensuite configurer la base de donnée.
# Pour cela, dans votre dossier GIT 
# Il y aura un fichier "parameters.yml.nopasswd" dans le dossier app/config
# COPIEZ-COLLEZ le - C'est important sinon il sera supprimé du git - et renomez votre copie "parameters.yml"
# Ce fichier est déjà dans le gitignore donc vous n'avez rien à toucher de ce côté la.
# Une fois fait, éditez le et mettez le mot de passe de la base de donnée à la bonne ligne
# Il reste ensuite juste à générer un seed pour la ligne SECRET
# Remplacez "probably_some_secrets_goes_here" par une chaine de 32 caractères aléatoires.
# Pour la générer vous pouvez utiliser ce site: http://nux.net/secret 

server {
    listen 80;

    root /home/oxodao/Git/projs3/projets3/web; # Ici vous mettez le dossier web contenu dans le repository cloné de GIT
    location / {
            try_files $uri /app_dev.php$is_args$args; # On laisse dev ici pour avoir toute la config développement
        }
    location ~ ^/(app|app_dev|config)\.php(/|$) {
            fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;
            fastcgi_split_path_info ^(.+\.php)(/.*)$;
            include fastcgi_params;
            fastcgi_param  SCRIPT_FILENAME  $realpath_root$fastcgi_script_name;
            fastcgi_param DOCUMENT_ROOT $realpath_root;
        }

    error_log /var/log/nginx/projets3_error.log; # Ici vous mettez l'endroit où vous voulez stocker les logs
    access_log /var/log/nginx/projets3_access.log;
  
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
            expires max;
            log_not_found off;
        }
}
